# 资源模块 - 模块设计

> 本模块负责文件上传、存储管理

## 模块功能

### 核心功能
- 文件上传
- 文件下载
- 文件删除
- 文件列表查询
- 存储空间管理

## 业务逻辑

### 文件上传流程

1. 接收上传文件
2. 验证文件类型和大小
3. 生成唯一存储文件名 (UUID + 扩展名)
4. 保存文件到本地存储
5. 记录文件元数据到数据库
6. 返回文件信息

### 文件下载流程

1. 根据文件ID查询文件信息
2. 验证文件存在性
3. 增加下载计数
4. 返回文件流

### 文件删除流程

1. 验证用户权限(仅上传者可删除)
2. 逻辑删除数据库记录
3. 物理删除文件(可选,异步)

## 模块架构

### 三层架构 (DDD)

```
resource/
├── application/         # 应用层
│   ├── service/        # 业务服务
│   └── converter/      # DTO转换器
├── domain/             # 领域层
│   ├── entity/         # 领域实体
│   └── repository/     # 仓储接口
└── infrastructure/     # 基础设施层
    └── persistence/    # 持久化实现
```
