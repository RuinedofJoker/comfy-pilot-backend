# 通知模块 - 模块设计

> 本模块负责邮件发送、模板管理、异步队列

## 模块功能

### 核心功能
- 邮件发送服务
- 邮件模板管理
- 发送队列（异步处理）
- 发送日志记录
- 发送状态追踪

### 邮件类型
- 密码重置邮件
- 注册验证邮件（可选）
- 系统通知邮件

## 业务逻辑

### 邮件发送流程

1. 接收发送请求
2. 创建邮件日志记录(状态:PENDING)
3. 调用邮件服务发送
4. 更新发送状态和时间
5. 失败时记录错误信息

### 重试机制

- 发送失败自动重试(最多3次)
- 重试间隔递增(1分钟、5分钟、15分钟)
- 超过重试次数标记为FAILED

## 模块架构

### 三层架构 (DDD)

```
notification/
├── application/         # 应用层
│   └── service/        # 邮件服务
├── domain/             # 领域层
│   ├── entity/         # 邮件日志实体
│   └── repository/     # 仓储接口
└── infrastructure/     # 基础设施层
    └── persistence/    # 持久化实现
```
