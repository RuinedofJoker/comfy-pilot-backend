# 通知模块 - 数据模型

> 本文档定义通知模块相关的数据表设计

## 数据表

### email_log - 邮件发送日志表

**表说明**: 记录邮件发送历史和状态

#### 字段定义

| 字段名 | 类型 | 约束 | 默认值 | 说明 |
|--------|------|------|--------|------|
| id | BIGINT | PRIMARY KEY | - | 主键ID |
| recipient | VARCHAR(255) | NOT NULL | - | 收件人邮箱 |
| subject | VARCHAR(500) | NOT NULL | - | 邮件主题 |
| content | TEXT | NOT NULL | - | 邮件内容 |
| send_status | VARCHAR(20) | NOT NULL | - | 发送状态 |
| error_message | TEXT | NULL | - | 错误信息 |
| send_time | TIMESTAMP | NULL | - | 实际发送时间 |
| retry_count | INT | NULL | 0 | 重试次数 |
| business_type | VARCHAR(50) | NULL | - | 业务类型 |
| business_id | VARCHAR(100) | NULL | - | 业务ID |
| create_time | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | 创建时间 |
| create_by | BIGINT | NOT NULL | - | 创建人ID |
| update_time | TIMESTAMP | NOT NULL | CURRENT_TIMESTAMP | 更新时间 |
| update_by | BIGINT | NOT NULL | - | 更新人ID |
| is_deleted | BIGINT | NULL | 0 | 逻辑删除标记 |

#### 索引设计

| 索引名 | 类型 | 字段 | 说明 |
|--------|------|------|------|
| PRIMARY | 主键 | id | 主键索引 |
| idx_email_log_recipient | 普通 | recipient | 查询收件人 |
| idx_email_log_send_status | 普通 | send_status | 查询发送状态 |
| idx_email_log_business | 普通 | business_type, business_id | 查询业务邮件 |
| idx_email_log_create_time | 普通 | create_time | 时间排序 |

#### 发送状态枚举

| 状态值 | 说明 |
|--------|------|
| PENDING | 待发送 |
| SUCCESS | 发送成功 |
| FAILED | 发送失败 |

