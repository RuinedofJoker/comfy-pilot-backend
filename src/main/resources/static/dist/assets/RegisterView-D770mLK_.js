import{d as _,u as B,r as p,a as b,b as y,c as x,o as k,w as t,e as o,f as U,g as l,i as w,t as C,_ as q}from"./index-DUI3biLs.js";import{B as I,A as N}from"./BaseButton-CKpm-xLw.js";import{B as v}from"./BaseInput-NXvjoPX8.js";import{P as g}from"./PasswordInput-BKZqSuhC.js";import{v as R,a as $,b as A}from"./validator-C8VLtmvt.js";import{r as E}from"./auth-DHo3H-uo.js";const S={class:"g-register-view"},z={class:"g-register-view__footer"},D=_({__name:"RegisterView",setup(L){const c=B(),e=p({username:"",email:"",password:"",confirmPassword:""}),r=p({username:"",email:"",password:"",confirmPassword:""}),i=b(!1);function n(){e.username?R(e.username)?r.username="":r.username="用户名为3-20位字母、数字或下划线":r.username="请输入用户名"}function d(){e.email?$(e.email)?r.email="":r.email="邮箱格式不正确":r.email="请输入邮箱"}function m(){e.password?A(e.password)?r.password="":r.password="密码至少8位，包含字母和数字":r.password="请输入密码"}function u(){e.confirmPassword?e.confirmPassword!==e.password?r.confirmPassword="两次输入的密码不一致":r.confirmPassword="":r.confirmPassword="请再次输入密码"}async function P(){if(n(),d(),m(),u(),!(r.username||r.email||r.password||r.confirmPassword)){i.value=!0;try{await E({username:e.username,email:e.email,password:e.password}),C.success("注册成功！正在跳转..."),await c.push("/login")}catch(f){console.error("注册失败:",f)}finally{i.value=!1}}}return(f,s)=>{const V=y("router-link");return k(),x(N,null,{default:t(()=>[o("div",S,[s[7]||(s[7]=o("h2",{class:"g-register-view__title"},"注册",-1)),s[8]||(s[8]=o("p",{class:"g-register-view__description"},"创建您的 Comfy Pilot 账户",-1)),o("form",{class:"g-register-view__form",onSubmit:U(P,["prevent"])},[l(v,{modelValue:e.username,"onUpdate:modelValue":s[0]||(s[0]=a=>e.username=a),label:"用户名",type:"text",placeholder:"请输入用户名",required:"",error:r.username,onBlur:n},null,8,["modelValue","error"]),l(v,{modelValue:e.email,"onUpdate:modelValue":s[1]||(s[1]=a=>e.email=a),label:"邮箱",type:"email",placeholder:"请输入邮箱",required:"",error:r.email,onBlur:d},null,8,["modelValue","error"]),l(g,{modelValue:e.password,"onUpdate:modelValue":s[2]||(s[2]=a=>e.password=a),label:"密码",placeholder:"至少8位，包含字母和数字",required:"",error:r.password,onBlur:m},null,8,["modelValue","error"]),l(g,{modelValue:e.confirmPassword,"onUpdate:modelValue":s[3]||(s[3]=a=>e.confirmPassword=a),label:"确认密码",placeholder:"请再次输入密码",required:"",error:r.confirmPassword,onBlur:u},null,8,["modelValue","error"]),l(I,{type:"submit",variant:"primary",size:"large",block:"",loading:i.value},{default:t(()=>[...s[4]||(s[4]=[w(" 注册 ",-1)])]),_:1},8,["loading"])],32),o("div",z,[s[6]||(s[6]=o("span",{class:"g-register-view__footer-text"},"已有账户？",-1)),l(V,{to:"/login",class:"g-register-view__link"},{default:t(()=>[...s[5]||(s[5]=[w(" 立即登录 ",-1)])]),_:1})])])]),_:1})}}}),J=q(D,[["__scopeId","data-v-9716d1d0"]]);export{J as default};
