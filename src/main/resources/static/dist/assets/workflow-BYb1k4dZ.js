import{X as a,A as m,a as f,x as V}from"./index-CtjyYKdR.js";function S(o){return a.get("/api/v1/workflows",{params:o})}function B(o){return a.get(`/api/v1/workflows/${o}`)}function A(o){return a.post("/api/v1/workflows",o)}function D(o,n){return a.put(`/api/v1/workflows/${o}`,n)}function L(o){return a.delete(`/api/v1/workflows/${o}`)}function N(o){return a.get(`/api/v1/workflows/${o}/content`)}function X(o,n){return a.post(`/api/v1/workflows/${o}/content`,n)}function b(o){return a.get(`/api/v1/workflows/${o}/versions`)}function j(o,n){return a.post(`/api/v1/workflows/${o}/versions`,n)}const z=m("workflow",()=>{const o=f([]),n=f(null),u=f(null),i=f([]),l=f(!1),w=f(!1),v=V(()=>o.value.length>0);async function k(e){l.value=!0;try{o.value=await S(e)}finally{l.value=!1}}async function W(e){l.value=!0;try{n.value=await B(e)}finally{l.value=!1}}async function p(e){const t=await A(e);return o.value.unshift(t),t}async function y(e,t){const r=await D(e,t),s=o.value.findIndex(c=>c.id===e);s!==-1&&(o.value[s]=r),n.value?.id===e&&(n.value=r)}async function d(e){await L(e),o.value=o.value.filter(t=>t.id!==e),n.value?.id===e&&(n.value=null,u.value=null)}async function g(e){l.value=!0;try{u.value=await N(e)}finally{l.value=!1}}async function h(e,t){w.value=!0;try{const r=await X(e,{content:t});u.value=t;const s=o.value.findIndex(c=>c.id===e);s!==-1&&(o.value[s]=r),n.value?.id===e&&(n.value=r)}finally{w.value=!1}}function C(e){n.value=e,u.value=e?.activeContent||null}function $(){o.value=[],n.value=null,u.value=null,i.value=[]}async function x(e){l.value=!0;try{i.value=await b(e)}finally{l.value=!1}}async function I(e,t){const r=await j(e,t);return i.value.unshift(r),r}return{workflows:o,currentWorkflow:n,currentWorkflowContent:u,versions:i,isLoading:l,isSaving:w,hasWorkflows:v,fetchWorkflows:k,fetchWorkflowById:W,fetchWorkflowContent:g,createNewWorkflow:p,updateWorkflowInfo:y,saveWorkflowContent:h,removeWorkflow:d,setCurrentWorkflow:C,clearWorkflowData:$,fetchWorkflowVersions:x,createVersion:I}});export{z as u};
