import{d as v,r as f,a as p,b as B,c as k,o as l,w as i,e as s,k as u,g as y,h as r,j as c,_ as V}from"./index-Bjatt9vk.js";import{B as b,A as x}from"./BaseButton-CWfhliBU.js";import{B as C}from"./BaseInput-DZYyVMne.js";import{B as E}from"./BaseIcon-C5VeN_Kv.js";import{a as I}from"./validator-C8VLtmvt.js";import{f as N}from"./auth-CZZNEzhi.js";const P={class:"g-forgot-password-view"},S={key:1,class:"g-forgot-password-view__success"},z={class:"g-forgot-password-view__footer"},A=v({__name:"ForgotPasswordView",setup(F){const a=f({email:""}),o=f({email:""}),t=p(!1),n=p(!1);function m(){a.email?I(a.email)?o.email="":o.email="邮箱格式不正确":o.email="请输入邮箱"}async function g(){if(m(),!o.email){t.value=!0;try{await N({email:a.email}),n.value=!0}catch(d){console.error("发送重置链接失败:",d),o.email="该邮箱未注册"}finally{t.value=!1}}}return(d,e)=>{const w=B("router-link");return l(),k(x,null,{default:i(()=>[s("div",P,[e[5]||(e[5]=s("h2",{class:"g-forgot-password-view__title"},"忘记密码",-1)),e[6]||(e[6]=s("p",{class:"g-forgot-password-view__description"}," 请输入您的邮箱地址，我们将发送重置密码链接 ",-1)),n.value?(l(),u("div",S,[r(E,{name:"check-circle",size:48,color:"#52c41a"}),e[2]||(e[2]=s("p",{class:"g-forgot-password-view__success-text"}," 重置密码链接已发送到您的邮箱 ",-1)),e[3]||(e[3]=s("p",{class:"g-forgot-password-view__success-hint"}," 请查收邮件并点击链接重置密码 ",-1))])):(l(),u("form",{key:0,class:"g-forgot-password-view__form",onSubmit:y(g,["prevent"])},[r(C,{modelValue:a.email,"onUpdate:modelValue":e[0]||(e[0]=_=>a.email=_),label:"邮箱",type:"email",placeholder:"请输入注册时使用的邮箱",required:"",error:o.email,onBlur:m},null,8,["modelValue","error"]),r(b,{type:"submit",variant:"primary",size:"large",block:"",loading:t.value},{default:i(()=>[...e[1]||(e[1]=[c(" 发送重置链接 ",-1)])]),_:1},8,["loading"])],32)),s("div",z,[r(w,{to:"/login",class:"g-forgot-password-view__link"},{default:i(()=>[...e[4]||(e[4]=[c(" 返回登录 ",-1)])]),_:1})])])]),_:1})}}}),U=V(A,[["__scopeId","data-v-0af8b7c9"]]);export{U as default};
