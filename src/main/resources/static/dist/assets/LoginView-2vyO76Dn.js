import{d as v,u as _,r as f,a as c,b,c as k,o as V,w as i,e as o,f as x,g as t,h as B,v as y,i as d,s as M,j as T,_ as C}from"./index-DUI3biLs.js";import{B as I,A as L}from"./BaseButton-CKpm-xLw.js";import{B as N}from"./BaseInput-NXvjoPX8.js";import{P}from"./PasswordInput-BKZqSuhC.js";import{l as U}from"./auth-DHo3H-uo.js";const q={class:"g-login-view"},A={class:"g-login-view__options"},D={class:"g-login-view__checkbox"},R={class:"g-login-view__footer"},S=v({__name:"LoginView",setup(h){const g=_(),s=f({email:"",password:"",rememberMe:!1}),r=f({email:"",password:""}),n=c(!1);function u(){s.email?r.email="":r.email="请输入邮箱"}function m(){s.password?r.password="":r.password="请输入密码"}async function w(){if(u(),m(),!(r.email||r.password)){n.value=!0;try{const l=await U(s);M(l.accessToken),T(l.refreshToken),await g.push("/services")}catch(l){console.error("登录失败:",l)}finally{n.value=!1}}}return(l,e)=>{const p=b("router-link");return V(),k(L,null,{default:i(()=>[o("div",q,[e[8]||(e[8]=o("h2",{class:"g-login-view__title"},"登录",-1)),e[9]||(e[9]=o("p",{class:"g-login-view__description"},"欢迎回来，请登录您的账户",-1)),o("form",{class:"g-login-view__form",onSubmit:x(w,["prevent"])},[t(N,{modelValue:s.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.email=a),label:"邮箱",type:"text",placeholder:"请输入邮箱",required:"",error:r.email,onBlur:u},null,8,["modelValue","error"]),t(P,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=a=>s.password=a),label:"密码",placeholder:"请输入密码",required:"",error:r.password,onBlur:m},null,8,["modelValue","error"]),o("div",A,[o("label",D,[B(o("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.rememberMe=a),type:"checkbox"},null,512),[[y,s.rememberMe]]),e[3]||(e[3]=o("span",null,"记住我",-1))]),t(p,{to:"/forgot-password",class:"g-login-view__link"},{default:i(()=>[...e[4]||(e[4]=[d(" 忘记密码？ ",-1)])]),_:1})]),t(I,{type:"submit",variant:"primary",size:"large",block:"",loading:n.value},{default:i(()=>[...e[5]||(e[5]=[d(" 登录 ",-1)])]),_:1},8,["loading"])],32),o("div",R,[e[7]||(e[7]=o("span",{class:"g-login-view__footer-text"},"还没有账户？",-1)),t(p,{to:"/register",class:"g-login-view__link"},{default:i(()=>[...e[6]||(e[6]=[d(" 立即注册 ",-1)])]),_:1})])])]),_:1})}}}),H=C(S,[["__scopeId","data-v-d72e008e"]]);export{H as default};
