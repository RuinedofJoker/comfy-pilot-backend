import{d as x,a as c,x as E,p as L,k as l,o as i,e as t,h as T,i as V,C as M,F as A,z as C,w as $,f as d,m as n,y as g,B as r,j as z,_ as I}from"./index-CtjyYKdR.js";import{a as _}from"./agent-DAkQHjpZ.js";import{B as J}from"./BaseAdminModal-R2kbZGTp.js";import{s as k}from"./function-call-7Ysw4dEM.js";const O={class:"g-agent-management-view"},q={class:"m-content"},F={class:"m-toolbar"},U={class:"m-table-container"},j={class:"f-table"},K={class:"f-agent-code"},G={class:"f-agent-name"},H={class:"f-actions"},P=["onClick"],Q=["onClick"],R=["onClick"],W={key:0,class:"m-agent-detail"},X={class:"m-detail-section"},Y={class:"f-detail-grid"},Z={class:"f-detail-item"},tt={class:"f-value"},et={class:"f-detail-item"},st={class:"f-value f-code"},at={class:"f-detail-item"},nt={class:"f-value"},ot={class:"f-detail-item"},lt={class:"f-value"},it={class:"f-detail-item"},dt={class:"f-detail-item f-full-width"},ct={class:"f-value"},rt={class:"m-detail-section"},ut={class:"f-detail-grid"},ft={class:"f-detail-item"},mt={class:"f-value"},vt={class:"f-detail-item"},pt={class:"f-value"},gt={key:0,class:"m-detail-section"},_t={class:"f-json-viewer"},ht={key:1,class:"m-detail-section"},yt={class:"f-json-viewer"},bt={key:2,class:"m-detail-section"},wt={class:"f-config-definitions"},At={class:"f-config-def-header"},Ct={class:"f-config-name"},kt={key:0,class:"f-config-desc"},Nt={class:"f-config-meta"},Dt={key:0,class:"f-meta-tag required"},St={key:1,class:"f-meta-tag override"},Bt={key:2,class:"f-meta-info"},xt={key:3,class:"f-meta-info"},Et={key:4,class:"f-meta-info"},Lt={key:5,class:"f-meta-info"},Tt=x({__name:"AgentManagementView",setup(Vt){const u=c(""),m=c([]),h=c(!1),v=c(!1),o=c(null),N=E(()=>{if(!u.value)return m.value;const a=u.value.toLowerCase();return m.value.filter(e=>e.agentName.toLowerCase().includes(a)||e.agentCode.toLowerCase().includes(a)||e.description&&e.description.toLowerCase().includes(a))});function y(a){return a==="ENABLED"?"已启用":"已禁用"}function b(a){return a?new Date(a).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"-"}function w(a){try{const e=typeof a=="string"?JSON.parse(a):a;return JSON.stringify(e,null,2)}catch{return a}}async function p(){try{h.value=!0,m.value=await _.getAllAgents()}catch(a){console.error("加载 Agent 列表失败:",a),r({type:"fail",message:"加载 Agent 列表失败"})}finally{h.value=!1}}function D(a){o.value=a,v.value=!0}async function S(a){try{await k({title:"确认启用",message:`确定要启用 Agent "${a.agentName}" 吗？`,confirmButtonText:"启用",cancelButtonText:"取消",className:"custom-confirm-dialog"}),await _.enableAgent(a.id),r({type:"success",message:"启用成功"}),await p()}catch(e){e!=="cancel"&&(console.error("启用 Agent 失败:",e),r({type:"fail",message:"启用失败"}))}}async function B(a){try{await k({title:"确认禁用",message:`确定要禁用 Agent "${a.agentName}" 吗？`,confirmButtonText:"禁用",cancelButtonText:"取消",className:"custom-confirm-dialog"}),await _.disableAgent(a.id),r({type:"success",message:"禁用成功"}),await p()}catch(e){e!=="cancel"&&(console.error("禁用 Agent 失败:",e),r({type:"fail",message:"禁用失败"}))}}return L(()=>{p()}),(a,e)=>(i(),l("div",O,[e[17]||(e[17]=t("div",{class:"m-header"},[t("h1",null,"Agent 配置管理")],-1)),t("div",q,[t("div",F,[V(t("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>u.value=s),type:"text",class:"f-search",placeholder:"搜索 Agent..."},null,512),[[M,u.value]])]),t("div",U,[t("table",j,[e[3]||(e[3]=t("thead",null,[t("tr",null,[t("th",null,"Agent 编码"),t("th",null,"Agent 名称"),t("th",null,"描述"),t("th",null,"版本"),t("th",null,"状态"),t("th",null,"操作")])],-1)),t("tbody",null,[(i(!0),l(A,null,C(N.value,s=>(i(),l("tr",{key:s.id},[t("td",null,[t("span",K,n(s.agentCode),1)]),t("td",null,[t("span",G,n(s.agentName),1)]),t("td",null,n(s.description||"-"),1),t("td",null,n(s.version),1),t("td",null,[t("span",{class:g(["f-status",s.status==="ENABLED"?"active":"disabled"])},[e[2]||(e[2]=t("span",{class:"f-status-dot"},null,-1)),z(" "+n(y(s.status)),1)],2)]),t("td",null,[t("div",H,[t("button",{class:"f-btn",onClick:f=>D(s)},"查看",8,P),s.status==="DISABLED"?(i(),l("button",{key:0,class:"f-btn f-btn-success",onClick:f=>S(s)}," 启用 ",8,Q)):d("",!0),s.status==="ENABLED"?(i(),l("button",{key:1,class:"f-btn f-btn-warning",onClick:f=>B(s)}," 禁用 ",8,R)):d("",!0)])])]))),128))])])])]),T(J,{modelValue:v.value,"onUpdate:modelValue":e[1]||(e[1]=s=>v.value=s),title:"Agent 详情","show-footer":!1,width:"600px"},{default:$(()=>[o.value?(i(),l("div",W,[t("div",X,[e[10]||(e[10]=t("h3",{class:"f-section-title"},"基本信息",-1)),t("div",Y,[t("div",Z,[e[4]||(e[4]=t("span",{class:"f-label"},"Agent ID:",-1)),t("span",tt,n(o.value.id),1)]),t("div",et,[e[5]||(e[5]=t("span",{class:"f-label"},"Agent 编码:",-1)),t("span",st,n(o.value.agentCode),1)]),t("div",at,[e[6]||(e[6]=t("span",{class:"f-label"},"Agent 名称:",-1)),t("span",nt,n(o.value.agentName),1)]),t("div",ot,[e[7]||(e[7]=t("span",{class:"f-label"},"版本号:",-1)),t("span",lt,n(o.value.version),1)]),t("div",it,[e[8]||(e[8]=t("span",{class:"f-label"},"状态:",-1)),t("span",{class:g(["f-value f-status-badge",o.value.status==="ENABLED"?"enabled":"disabled"])},n(y(o.value.status)),3)]),t("div",dt,[e[9]||(e[9]=t("span",{class:"f-label"},"描述:",-1)),t("span",ct,n(o.value.description||"-"),1)])])]),t("div",rt,[e[13]||(e[13]=t("h3",{class:"f-section-title"},"时间信息",-1)),t("div",ut,[t("div",ft,[e[11]||(e[11]=t("span",{class:"f-label"},"创建时间:",-1)),t("span",mt,n(b(o.value.createTime)),1)]),t("div",vt,[e[12]||(e[12]=t("span",{class:"f-label"},"更新时间:",-1)),t("span",pt,n(b(o.value.updateTime)),1)])])]),o.value.agentScopeConfig?(i(),l("div",gt,[e[14]||(e[14]=t("h3",{class:"f-section-title"},"Agent Scope 配置",-1)),t("pre",_t,n(w(o.value.agentScopeConfig)),1)])):d("",!0),o.value.config?(i(),l("div",ht,[e[15]||(e[15]=t("h3",{class:"f-section-title"},"运行时配置",-1)),t("pre",yt,n(w(o.value.config)),1)])):d("",!0),o.value.agentConfigDefinitions&&o.value.agentConfigDefinitions.length>0?(i(),l("div",bt,[e[16]||(e[16]=t("h3",{class:"f-section-title"},"配置定义",-1)),t("div",wt,[(i(!0),l(A,null,C(o.value.agentConfigDefinitions,(s,f)=>(i(),l("div",{key:f,class:"f-config-def-item"},[t("div",At,[t("span",Ct,n(s.name),1),t("span",{class:g(["f-config-type",`type-${s.type.toLowerCase()}`])},n(s.type),3)]),s.description?(i(),l("div",kt,n(s.description),1)):d("",!0),t("div",Nt,[s.require?(i(),l("span",Dt,"必填")):d("",!0),s.userOverride?(i(),l("span",St,"用户可覆盖")):d("",!0),s.format?(i(),l("span",Bt,"格式: "+n(s.format),1)):d("",!0),s.intStartScope!==void 0?(i(),l("span",xt," 范围: "+n(s.intStartScope)+" - "+n(s.intEndScope),1)):d("",!0),s.floatStartScope!==void 0?(i(),l("span",Et," 范围: "+n(s.floatStartScope)+" - "+n(s.floatEndScope),1)):d("",!0),s.modelCallingType?(i(),l("span",Lt," 模型类型: "+n(s.modelCallingType),1)):d("",!0)])]))),128))])])):d("",!0)])):d("",!0)]),_:1},8,["modelValue"])]))}}),Jt=I(Tt,[["__scopeId","data-v-08b268e2"]]);export{Jt as default};
