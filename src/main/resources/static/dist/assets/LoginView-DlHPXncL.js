import{d as f,u as w,r as c,a as g,b as v,c as k,o as V,w as u,e as a,f as m,g as h,h as i,i as B,v as b,j as x,s as y,l as N,_ as C}from"./index-Bjatt9vk.js";import{B as T,A as M}from"./BaseButton-CWfhliBU.js";import{B as E}from"./BaseInput-DZYyVMne.js";import{P as I}from"./PasswordInput-CnJrlVvS.js";import{l as L}from"./auth-CZZNEzhi.js";const P={class:"g-login-view"},U={class:"g-login-view__options"},q={class:"g-login-view__checkbox"};const A=f({__name:"LoginView",setup(D){const p=w(),o=c({email:"",password:"",rememberMe:!1}),s=c({email:"",password:""}),l=g(!1);function n(){o.email?s.email="":s.email="请输入邮箱"}function d(){o.password?s.password="":s.password="请输入密码"}async function _(){if(n(),d(),!(s.email||s.password)){l.value=!0;try{const t=await L(o);y(t.accessToken),N(t.refreshToken),await p.push("/services")}catch(t){console.error("登录失败:",t)}finally{l.value=!1}}}return(t,e)=>{const R=v("router-link");return V(),k(M,null,{default:u(()=>[a("div",P,[e[8]||(e[8]=a("h2",{class:"g-login-view__title"},"登录",-1)),e[9]||(e[9]=a("p",{class:"g-login-view__description"},"欢迎回来，请登录您的账户",-1)),a("form",{class:"g-login-view__form",onSubmit:h(_,["prevent"])},[i(E,{modelValue:o.email,"onUpdate:modelValue":e[0]||(e[0]=r=>o.email=r),label:"邮箱",type:"text",placeholder:"请输入邮箱",required:"",error:s.email,onBlur:n},null,8,["modelValue","error"]),i(I,{modelValue:o.password,"onUpdate:modelValue":e[1]||(e[1]=r=>o.password=r),label:"密码",placeholder:"请输入密码",required:"",error:s.password,onBlur:d},null,8,["modelValue","error"]),a("div",U,[a("label",q,[B(a("input",{"onUpdate:modelValue":e[2]||(e[2]=r=>o.rememberMe=r),type:"checkbox"},null,512),[[b,o.rememberMe]]),e[3]||(e[3]=a("span",null,"记住我",-1))]),m("",!0)]),i(T,{type:"submit",variant:"primary",size:"large",block:"",loading:l.value},{default:u(()=>[...e[5]||(e[5]=[x(" 登录 ",-1)])]),_:1},8,["loading"])],32),m("",!0)])]),_:1})}}}),J=C(A,[["__scopeId","data-v-23c3ed66"]]);export{J as default};
